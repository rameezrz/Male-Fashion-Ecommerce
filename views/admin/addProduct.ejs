
<div class="col d-flex justify-content-center">
  <form class="form w-50" action="/admin_panel/add_product" method="post" enctype="multipart/form-data">
    <h4>Add Product</h4>
    <div class="form-group mb-3">
      <input type="text" class="form-control" id="exampleInputEmail1"  placeholder="Product Title" name="productName" required>
    </div>
    <div class="form-group mb-3">
      <input type="text" class="form-control" id="exampleInputEmail1"  placeholder="Product Brand" name="brand" required>
    </div>
    <div class="mb-3">
      <input type="number" class="form-control" id="productPrice"  placeholder="Product Price" name="productPrice" required>
    </div>
    <div class="mb-3">
      <input type="number" class="form-control" id="salePrice"  placeholder="Product Sale Price" name="salePrice" required>
    </div>
    <div class="mb-3">
      <input type="number" class="form-control" id="exampleInputEmail1"  placeholder="Product Stock" name="stock" required>
    </div>
    <div class="mb-3">
        <textarea
        placeholder="Product Description" name="description"  class="w-100 form-control"
        ></textarea>
    </div>
    <div class="form-group mb-3">
      <label for="selectBox" class="">Categories</label>
      <select class="form-control" name="category" id="categorySelect" required>
        <% categories.forEach((category) => { %>
          <option value="<%= category._id %>"> <%= category.name %></option>
        <% }); %>
      </select>
    </div>
    
    <div class="form-group mb-3">
      <label for="selectBox" class="">Choose Sub-Category</label>
      <select class="form-control" name="subCategory" id="subCategorySelect" required>
        <option value=""></option>
      </select>
    </div>
    <div class="mb-3">
      <label for="imageField">Images</label>
      <input type="file" class="form-control" id="imageField"  placeholder="Product Images" name="images" multiple required>
    </div>
    <button type="submit" class="btn btn-primary">Add</button>
  </form>
</div>
<script src="/admin/js/productFormValidation.js"></script>

<script>
  $('#categorySelect').on('change', function() {
        var categoryId = $(this).val(); 
        var subcategorySelect = $('#subCategorySelect'); 
          $.ajax({
          url: '/admin_panel/get_subCategory', 
          method: 'POST',
          data: { categoryId}, 
          success: function(subcategories) {
               subcategorySelect.empty();
            $.each(subcategories, function(index, subcategory) {
              subcategorySelect.append($('<option>').val(subcategory._id).text(subcategory.name));
            });
          }
     });
});
</script>